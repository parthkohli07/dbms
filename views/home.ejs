<%- include("header")-%>
<table class="table">
    <thead class="thead-dark">
      <tr>
        <th scope="col">#</th>
        <th scope="col">FlightID</th>
        <th scope="col">source</th>
        <th scope="col">Destination</th>
        <th scope="col"> Time</th>
        <th scope="col"> Price</th>
        <th scope="col">Seats available</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th scope="row">1</th>
        <td>Mark</td>
        <td>Otto</td>
        <td>@mdo</td>
        <td>@mdo</td>
        <td>@mdo</td>
        <td><button id="myBtn">Book</button></td> 
      </tr>
      <% if(add==1){%>
         <% var index=2;%>
        <%  flight.forEach(function(flight){   %>
          <tr>
            <th scope="row"><%=index%> </th>
          <td><%= flight.flightID%> </td>
            <td><%= flight.source %></td>
            <td><%= flight.destination %></td>
            <td><%= flight.time %></td>
            <td><%= flight.price %></td>
            <td><button id="myBtn">Book</button></td>
           <% add=0 %>
           <% index++ %>
          </tr>
            <%})%>
      <%}%>
    </tbody>
  </table>
  
  <div >
    <!-- Trigger/Open The Modal -->
    
    
    <!-- The Modal -->
    <div id="myModal" class="modal">
    
      <!-- Modal content -->
      <div class="modal-content">

        <form action="" method="post">
            <div class="form-group purple-border">
                <span class="close">&times;</span>
                
                  <label for="cars">Choose a Seat Type:</label>
                  <select name="cars" id="cars">
                    <option value="Window">window</option>
                    <option value="">middle</option>
                    <option value="AutoCad">isle</option>
                  </select>
                  <br><br>
            
                
                
                <div class="container">
                    <div class="row mb-8 justify-content-center ">
                  <div class="col-md-6 col-12">
                     <div class="mb-4 border-bottom pb-2">
                        <h4 class="mb-0">No of Seats</h4>
                     </div>
                  <div class="row">
                  <div class="col-12">
                     <div class="d-flex justify-content-between">
                        <div>
                           <p class="text-dark">Window</p>
                        </div>
                        <div class="input-group w-auto justify-content-end align-items-center">
                           
                           <input type="number" step="1" max="10" value="1" name="quantity" class="quantity-field border-0 text-center w-25">
                          
                        </div>
                     </div>
                  </div>
                  <div class="col-12">
                     <div class="d-flex justify-content-between">
                        <div>
                           <p class="text-dark">Middle</p>
                        </div>
                        <div class="input-group w-auto justify-content-end align-items-center">
                           
                           <input type="number" step="1" max="10" value="1" name="quantity" class="quantity-field border-0 text-center w-25">
                          
                        </div>
                     </div>
                  </div>
                  <div class="col-12">
                     <div class="d-flex justify-content-between">
                        <div>
                           <p class="text-dark">Isle</p>
                        </div>
                        <div class="input-group w-auto justify-content-end align-items-center">
                           
                           <input type="number" step="1" max="10" value="1" name="quantity" class="quantity-field border-0 text-center w-25">
                           
                        </div>
                     </div>
                  </div>
                  </div>
                      </div>
                    </div>
                
                <button id="1" class=" btn btn-primary " type="submit" >Submit</button>
            </div>
        </form>
      </div>
    
    </div>
    <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal 
        btn.onclick = function() {
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
          modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
          if (event.target == modal) {
            modal.style.display = "none";
          }
        }
        function incrementValue(e) {
        e.preventDefault();
        var fieldName = $(e.target).data('field');
        var parent = $(e.target).closest('div');
        var currentVal = parseInt(parent.find('input[name=' + fieldName + ']').val(), 10);

        if (!isNaN(currentVal)) {
            parent.find('input[name=' + fieldName + ']').val(currentVal + 1);
        } else {
            parent.find('input[name=' + fieldName + ']').val(0);
        }
    }

    function decrementValue(e) {
        e.preventDefault();
        var fieldName = $(e.target).data('field');
        var parent = $(e.target).closest('div');
        var currentVal = parseInt(parent.find('input[name=' + fieldName + ']').val(), 10);

        if (!isNaN(currentVal) && currentVal > 0) {
            parent.find('input[name=' + fieldName + ']').val(currentVal - 1);
        } else {
            parent.find('input[name=' + fieldName + ']').val(0);
        }
    }

    $('.input-group').on('click', '.button-plus', function(e) {
        incrementValue(e);
    });

    $('.input-group').on('click', '.button-minus', function(e) {
        decrementValue(e);
    });function incrementValue(e) {
        e.preventDefault();
        var fieldName = $(e.target).data('field');
        var parent = $(e.target).closest('div');
        var currentVal = parseInt(parent.find('input[name=' + fieldName + ']').val(), 10);

        if (!isNaN(currentVal)) {
            parent.find('input[name=' + fieldName + ']').val(currentVal + 1);
        } else {
            parent.find('input[name=' + fieldName + ']').val(0);
        }
    }

    function decrementValue(e) {
        e.preventDefault();
        var fieldName = $(e.target).data('field');
        var parent = $(e.target).closest('div');
        var currentVal = parseInt(parent.find('input[name=' + fieldName + ']').val(), 10);

        if (!isNaN(currentVal) && currentVal > 0) {
            parent.find('input[name=' + fieldName + ']').val(currentVal - 1);
        } else {
            parent.find('input[name=' + fieldName + ']').val(0);
        }
    }

    $('.input-group').on('click', '.button-plus', function(e) {
        incrementValue(e);
    });

    $('.input-group').on('click', '.button-minus', function(e) {
        decrementValue(e);
    });
        </script>
  
  </div>
</body>
</html>